$(function(){var t,i,e,s,a=$(".fading"),o=window.requestAnimationFrame;function n(){t=[],i=[],a.each(function(){var e=$(this).offset().top;t.push(e-.8*$(window).height()),i.push(e+$(this).outerHeight())})}function c(){a.each(function(s){if(!$(this).is(":animated"))if(e>t[s]&&e<i[s]){$(this).fadeTo(250,1);var a=$(this).closest("section")[0].id;$(".active").removeClass("active"),$('[href*="'+a+'"]').addClass("active")}else 0!=$(this).css("opacity")&&$(this).fadeTo(0,0)})}n(),$(window).resize(n).scroll(function(){e=$(this).scrollTop(),s||(o?requestAnimationFrame(c):c())}),$(".scroll").click(function(t){t.preventDefault(),s=!0,$(".active").removeClass("active"),$(this).addClass("active");var i=$(this.hash).offset().top,a=$(this.hash).find(".fading");i!=e&&a.length&&a.stop().fadeOut(),$("html, body").animate({scrollTop:i},500,function(){a.length&&a.fadeTo(250,1),s=!1})})});